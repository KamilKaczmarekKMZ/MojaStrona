<!DOCTYPE html>
<html>
<head>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    @keyframes zoom-in {
      0% {
        transform: translateZ(-1000px);
        opacity: 0;
      }
      50% {
        transform: translateZ(0px);
        opacity: 1;
      }
      100% {
        transform: translateZ(1000px);
        opacity: 0;
      }
    }

    .stuck-grid {
      block-size: 100svh;
      perspective: 1000px;
      transform-style: preserve-3d;
      display: grid;
      grid: repeat(4, 25dvh) / repeat(4, 25dvw);
      place-items: center;
      position: sticky;
      top: 0;
      overflow: clip;
    }

    .grid-item {
      transform-style: preserve-3d;
      font-size: 5vmin;
      font-weight: lighter;
      text-wrap: nowrap;
      color: #fff;
      text-shadow: 
        0 0 5px #fff,
        0 0 10px #fff,
        0 0 20px #fff,
        0 0 40px #0ff,
        0 0 80px #0ff,
        0 0 90px #0ff,
        0 0 100px #0ff,
        0 0 150px #0ff;
      animation: flicker 1.5s infinite alternate;

      @supports (animation-timeline: scroll()) {
        @media (prefers-reduced-motion: no-preference) {
          animation: zoom-in linear both, flicker 1.5s infinite alternate;
          animation-timeline: scroll(root block);
          will-change: transform, opacity;
        }
      }

      &.special.special {
        grid-row: 2 / span 2;
        grid-column: 2 / span 2;
        text-shadow: 
          0 0 10px #fff,
          0 0 20px #fff,
          0 0 30px #fff,
          0 0 40px #ff00de,
          0 0 70px #ff00de,
          0 0 80px #ff00de,
          0 0 100px #ff00de,
          0 0 150px #ff00de;
      }

      > b {
        font-size: 15vmin;
      }

      /* ... zachowane wszystkie style neonowych efektów ... */
    }

    model-viewer.grid-item.special {
      width: 100%;
      height: 100%;
      background: transparent;
      border: none;
      --poster-color: transparent;
      opacity: 1;
      transition: transform 0.5s ease;
    }

    model-viewer.grid-item.special::part(model) {
      transform: scale(1);
    }

    model-viewer.grid-item.special.zoom-out {
      transform: scale(0);
      opacity: 0;
    }

    @layer support {
      * {
        box-sizing: border-box;
        margin: 0;
      }

      html {
        block-size: 100%;
        color-scheme: dark light;
        background-color: #000;
      }

      body {
        min-block-size: 400vh;
        font-family: system-ui, sans-serif;
      }
    }
  </style>
</head>
<body>
  <div class="stuck-grid">
    <!-- Wszystkie elementy grid pozostają bez zmian -->
    <model-viewer 
      class="grid-item special" 
      src="twoje-logo.glb" 
      alt="Moje logo 3D"
      interaction-prompt="none"
      disable-zoom
      disable-pan
      disable-tap
      camera-orbit="0deg 90deg 0deg"
    ></model-viewer>
    <!-- ... -->
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const modelViewer = document.querySelector('model-viewer');
      const maxRotation = 360;
      const scrollHeight = document.body.scrollHeight - window.innerHeight;
      
      // Nowe parametry kontrolujące obrót i zoom
      const rotationEnd = 0.8; // 80% scrolla - koniec obrotu
      const zoomStart = 0.9;   // 90% scrolla - zaczyna znikać

      const handleScroll = () => {
        const scrollY = window.scrollY;
        const scrollProgress = Math.min(scrollY / scrollHeight, 1);
        
        // Faza 1: Obrót (0-80% scrolla)
        if (scrollProgress <= rotationEnd) {
          const rotation = (scrollProgress / rotationEnd) * maxRotation;
          modelViewer.cameraOrbit = `${rotation}deg 90deg 0deg`;
          modelViewer.classList.remove('zoom-out');
        } 
        // Faza 2: Zoom out (90-100% scrolla)
        else if (scrollProgress >= zoomStart) {
          const zoomProgress = (scrollProgress - zoomStart) / (1 - zoomStart);
          modelViewer.style.transform = `scale(${1 - zoomProgress})`;
          modelViewer.style.opacity = 1 - zoomProgress;
          modelViewer.classList.add('zoom-out');
        }
      };

      window.addEventListener('scroll', handleScroll);
    });
  </script>
</body>
</html>
